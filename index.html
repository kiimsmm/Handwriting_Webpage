<!-- index.html -->
<!-- index.html -->
<!-- 수정 대상: index.html 개선안 -->
<!-- 목표: 이미지 업로드 시 이미지 미리보기 표시 + 드래그 앤 드롭 기능 추가 -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>FontHacker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root{
            --fh-navy:#002147;
            --fh-navy-2:#07305a;
            --fh-muted:#6c757d;
            --fh-border:#dfe3e7;
            --fh-ring:#7aa7ff;
        }
        /* 배경 */
        body{
            background: linear-gradient(180deg, #f6f9ff 0%, #eef3ff 50%, #f7faff 100%);
        }

        /* 헤더 */
        .fh-navbar {
            background: linear-gradient(90deg, #002147, #00bfa6, #07305a);
            background-size: 200% 200%;
            animation: navbarGradient 17s ease-in-out infinite alternate;
        }

        @keyframes navbarGradient {
            0% {
                background-position: 0 50%;
            }
            100% {
                background-position: 100% 50%;
            }
        }
        .fh-brand{
            letter-spacing:.2px;
        }

        /* 레이아웃 */
        .fh-container{
            max-width: 980px;
        }
        .fh-section {
            background: #fff;
            border: 1px solid var(--fh-border);
            border-radius: 14px;
            box-shadow: 0 6px 14px rgba(0,0,0,.03);
            padding: 28px;
            transition: transform .3s ease, box-shadow .3s ease, border-color .3s ease;
        }

        .fh-section:hover {
            box-shadow: 0 10px 18px rgba(0,0,0,.06); /* 그림자 약간 강조 */
            border-color: #e6ecf5; /* 테두리를 살짝 더 밝게 */
        }

        /* 업로드 카드 */
        .upload-card{
            width: 280px;
            border:1px solid var(--fh-border);
            border-radius:14px;
            padding:16px 16px 18px;
            background:#fff;
            box-shadow: 0 6px 14px rgba(0,0,0,.04);
            transition: transform .15s ease, box-shadow .15s ease;
        }
        .upload-card:hover{
            transform: translateY(-2px);
            box-shadow: 0 10px 18px rgba(0,0,0,.06);
        }
        .badge-ab{
            font-weight:600;
            border-radius:999px;
            padding:.35rem .6rem;
        }

        /* 업로드 박스 */
        .upload-box{
            width: 100%;
            height: 260px;
            border: 2px dashed #cfd6dc;
            border-radius:12px;
            display:flex;
            align-items:center;
            justify-content:center;
            color: var(--fh-muted);
            font-size:14px;
            margin-top:10px;
            position:relative;
            overflow:hidden;
            background:#fafcff;
            transition:border-color .15s ease, background-color .15s ease, box-shadow .15s ease;
        }
        .upload-box img{
            max-width:100%;
            max-height:100%;
            object-fit:contain;
        }

        .upload-hint{
            font-size:.85rem;
            color:#8a97a3;
            margin-top:10px;
        }
        .upload-btn{
            width:100%;
            margin-top:12px;
        }
        input[type="file"]{ display:none; }

        /* 액션 영역 */
        .fh-actions .btn{
            min-width: 180px;
        }

        /* 푸터 */
        .fh-footer {
            position: fixed;
            left: 20px;
            bottom: 10px;
            color: #a0a9b3;
            font-size: .9rem;
        }
    </style>
    <link rel="icon" href="images/icon_32.png?v=4" type="image/png" sizes="32x32">
    <link rel="shortcut icon" href="images/icon_32.png?v=4" type="image/png">
</head>
<body>
<!-- 헤더 -->
<nav class="navbar fh-navbar py-3">
    <div class="container-fluid justify-content-center text-center">
        <div>
            <div class="text-white fw-bold fs-3 fh-brand">FontHacker</div>
        </div>
    </div>
</nav>

<!-- 본문 -->
<div class="container fh-container py-5">
    <div class="fh-section text-center">
        <p class="lead mb-4">손글씨 이미지를 업로드 하세요</p>
        <p class="lead mb-4"></p>
        <div class="d-flex justify-content-center gap-4 flex-wrap">
            <!-- 카드 A -->
            <div class="upload-card">
                <div class="d-flex align-items-center justify-content-between">
                    <span class="badge bg-primary-subtle text-primary border badge-ab">A</span>
                    <small class="text-secondary">PNG</small>
                </div>
                <div class="upload-box mt-2" id="box1"
                     ondrop="dropHandler(event, 'file1')"
                     ondragover="dragOverHandler(event)"
                     ondragleave="dragLeaveHandler(event)">
                    <div class="text-center px-3">
                        <div class="mb-1">이미지 A</div>
                        <small class="text-secondary">드래그 앤 드롭 또는 아래 버튼으로 업로드</small>
                    </div>
                </div>
                <input type="file" id="file1" accept="image/*" onchange="previewImage('file1', 'box1')">
                <label for="file1" class="btn btn-outline-primary rounded-pill upload-btn">샘플 A 업로드</label>
                <div class="upload-hint"></div>
            </div>

            <!-- 카드 B -->
            <div class="upload-card">
                <div class="d-flex align-items-center justify-content-between">
                    <span class="badge bg-success-subtle text-success border badge-ab">B</span>
                    <small class="text-secondary">PNG</small>
                </div>
                <div class="upload-box mt-2" id="box2"
                     ondrop="dropHandler(event, 'file2')"
                     ondragover="dragOverHandler(event)"
                     ondragleave="dragLeaveHandler(event)">
                    <div class="text-center px-3">
                        <div class="mb-1">이미지 B</div>
                        <small class="text-secondary">드래그 앤 드롭 또는 아래 버튼으로 업로드</small>
                    </div>
                </div>
                <input type="file" id="file2" accept="image/*" onchange="previewImage('file2', 'box2')">
                <label for="file2" class="btn btn-outline-primary rounded-pill upload-btn">샘플 B 업로드</label>
                <div class="upload-hint"></div>
            </div>
        </div>

        <!-- 액션 -->
        <div class="fh-actions d-flex justify-content-center gap-3 mt-4">
            <button class="btn btn-success rounded-pill btn-lg" onclick="startAnalysis()">분석 시작</button>
            <a href="draw.html" class="btn btn-outline-dark rounded-pill btn-lg">직접 손글씨 쓰기</a>
        </div>
    </div>
    <footer class="fh-footer">© 2025 FontHacker</footer>
</div>

<script>
    function previewImage(fileInputId, boxId) {
        const input = document.getElementById(fileInputId);
        const box = document.getElementById(boxId);
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function (e) {
                box.classList.remove('dragover');
                box.innerHTML = '';
                const img = document.createElement('img');
                img.src = e.target.result;
                img.alt = fileInputId === 'file1' ? '업로드된 이미지 A' : '업로드된 이미지 B';
                box.appendChild(img);
                localStorage.setItem(fileInputId === 'file1' ? 'handwritingImageA' : 'handwritingImageB', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    function dragOverHandler(ev) {
        ev.preventDefault();
        ev.currentTarget.classList.add('dragover');
        ev.dataTransfer.dropEffect = "copy";
    }
    function dragLeaveHandler(ev){
        ev.currentTarget.classList.remove('dragover');
    }
    function dropHandler(ev, fileInputId) {
        ev.preventDefault();
        ev.currentTarget.classList.remove('dragover');
        const files = ev.dataTransfer.files;
        if (files.length > 0) {
            const fileInput = document.getElementById(fileInputId);
            // 파일 선택 이벤트 트리거를 위해 DataTransfer 사용
            const dt = new DataTransfer();
            dt.items.add(files[0]);
            fileInput.files = dt.files;
            previewImage(fileInputId, fileInputId === 'file1' ? 'box1' : 'box2');
        }
    }
    function startAnalysis() {
        const imgA = localStorage.getItem("handwritingImageA");
        const imgB = localStorage.getItem("handwritingImageB");
        if (!imgA || !imgB) {
            alert("두 이미지를 모두 업로드하거나 직접 그려야 분석을 시작할 수 있습니다.");
            return;
        }
        window.location.href = "result.html";
    }
</script>
</body>
</html>